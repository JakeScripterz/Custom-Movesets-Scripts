-- Function to handle animation detection and replacement
local function handleAnimationDetection(animIdsToStop, replacementAnimId, animSpeed)
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")

    local function onAnimPlayed(animationTrack)
        local animId = tonumber(string.match(animationTrack.Animation.AnimationId, "%d+"))
        
        for _, stopId in ipairs(animIdsToStop) do
            if animId == stopId then
                animationTrack:Stop()
                local replacementAnimation = Instance.new("Animation")
                replacementAnimation.AnimationId = "rbxassetid://" .. replacementAnimId
                local replacementTrack = humanoid:LoadAnimation(replacementAnimation)
                replacementTrack:Play()
                replacementTrack:AdjustSpeed(animSpeed) -- Adjust the speed of the replacement animation
                break
            end
        end
    end
    
    humanoid.AnimationPlayed:Connect(onAnimPlayed)
end

-- First set of animations
local firstAnimIdsToStop = {12534735382}
local firstReplacementAnimId = 18181589384
local firstAnimspeed = 1
handleAnimationDetection(firstAnimIdsToStop, firstReplacementAnimId, firstAnimspeed)

-- Second set of animations
local secondAnimIdsToStop = {12509505723}
local secondReplacementAnimId = 13497875049
local secondAnimspeed = 1.4
handleAnimationDetection(secondAnimIdsToStop, secondReplacementAnimId, secondAnimspeed)

-- Third set of animations
local thirdAnimIdsToStop = {12618271998}
local thirdReplacementAnimId = 114095570398448
local thirdAnimspeed = 0.7
handleAnimationDetection(thirdAnimIdsToStop, thirdReplacementAnimId, thirdAnimspeed)

-- Fourth set of animations
local fourthAnimIdsToStop = {12684390285}
local fourthReplacementAnimId = 17857788598
local fourthAnimspeed = 1
handleAnimationDetection(fourthAnimIdsToStop, fourthReplacementAnimId, fourthAnimspeed)

local player = game.Players.LocalPlayer

local playerGui = player.PlayerGui

local hotbar = playerGui:FindFirstChild("Hotbar")

local backpack = hotbar:FindFirstChild("Backpack")

local hotbarFrame = backpack:FindFirstChild("Hotbar")

local baseButton = hotbarFrame:FindFirstChild("1").Base

local ToolName = baseButton.ToolName


ToolName.Text = "Flaming Kicks"

local player = game.Players.LocalPlayer

local playerGui = player.PlayerGui

local hotbar = playerGui:FindFirstChild("Hotbar")

local backpack = hotbar:FindFirstChild("Backpack")

local hotbarFrame = backpack:FindFirstChild("Hotbar")

local baseButton = hotbarFrame:FindFirstChild("2").Base

local ToolName = baseButton.ToolName


ToolName.Text = "Fire Fist"

local player = game.Players.LocalPlayer

local playerGui = player.PlayerGui

local hotbar = playerGui:FindFirstChild("Hotbar")

local backpack = hotbar:FindFirstChild("Backpack")

local hotbarFrame = backpack:FindFirstChild("Hotbar")

local baseButton = hotbarFrame:FindFirstChild("3").Base

local ToolName = baseButton.ToolName


ToolName.Text = "Flame Blitz"

local player = game.Players.LocalPlayer

local playerGui = player.PlayerGui

local hotbar = playerGui:FindFirstChild("Hotbar")

local backpack = hotbar:FindFirstChild("Backpack")

local hotbarFrame = backpack:FindFirstChild("Hotbar")

local baseButton = hotbarFrame:FindFirstChild("4").Base

local ToolName= baseButton.ToolName


--[[Dash]]

humanoid.AnimationPlayed:Connect(onAnimationPlayed)


local animationId = 10479335397


local player = game.Players.LocalPlayer

local character = player.Character or player.CharacterAdded:Wait()

local humanoid = character:WaitForChild("Humanoid")


local function onAnimationPlayed(animationTrack)

    if animationTrack.Animation.AnimationId == "rbxassetid://" .. animationId then

local p = game.Players.LocalPlayer

local Humanoid = p.Character:WaitForChild("Humanoid")


for _, animTrack in pairs(Humanoid:GetPlayingAnimationTracks()) do

    animTrack:Stop()

end


local AnimAnim = Instance.new("Animation")

AnimAnim.AnimationId = "rbxassetid://17838006839"

local Anim = Humanoid:LoadAnimation(AnimAnim)


local startTime = 0


Anim:Play()

Anim:AdjustSpeed(0)

Anim.TimePosition = startTime

Anim:AdjustSpeed(1.3)


delay(1.8, function()

    Anim:Stop()

end)


    end

end

--[[END OF DASH ANIM]]

--[[Punch anims]]

humanoid.AnimationPlayed:Connect(onAnimationPlayed)


local Players = game:GetService("Players")

local player = Players.LocalPlayer

local character = player.Character or player.CharacterAdded:Wait()

local humanoid = character:WaitForChild("Humanoid")


local animationIdsToStop = {

    [10470104242] = true, --downslam finisher

    [10469493270] = true, --punch1

    [10469630950] = true, --punch2

    [10469639222] = true, --punch3

    [10469643643] = true, --punch4

}


local replacementAnimations = {

    ["10469493270"] = "rbxassetid://17889458563", --punch1

    ["10469630950"] = "rbxassetid://17889461810", --punch2

    ["10469639222"] = "rbxassetid://13532562418", --punch3

    ["10469643643"] = "rbxassetid://13294471966", --punch4

    ["17859015788"] = "rbxassetid://17859015788", --downslam finisher

    ["11365563255"] = "rbxassetid://14516273501" --punch idk

}


local queue = {}

local isAnimating = false


local function playReplacementAnimation(animationId)

    if isAnimating then

        table.insert(queue, animationId)

        return

    end

   

    isAnimating = true

    local replacementAnimationId = replacementAnimations[tostring(animationId)]

    if replacementAnimationId then

        local AnimAnim = Instance.new("Animation")

        AnimAnim.AnimationId = replacementAnimationId

        local Anim = humanoid:LoadAnimation(AnimAnim)

        Anim:Play()

       

        Anim.Stopped:Connect(function()

            isAnimating = false

            if #queue > 0 then

                local nextAnimationId = table.remove(queue, 1)

                playReplacementAnimation(nextAnimationId)

            end

        end)

    else

        isAnimating = false

    end

end


local function stopSpecificAnimations()

    for _, track in ipairs(humanoid:GetPlayingAnimationTracks()) do

        local animationId = tonumber(track.Animation.AnimationId:match("%d+"))

        if animationIdsToStop[animationId] then

            track:Stop()

        end

    end

end


local function onAnimationPlayed(animationTrack)

    local animationId = tonumber(animationTrack.Animation.AnimationId:match("%d+"))

    if animationIdsToStop[animationId] then

        stopSpecificAnimations()

        animationTrack:Stop()

       

        local replacementAnimationId = replacementAnimations[tostring(animationId)]

        if replacementAnimationId then

            playReplacementAnimation(animationId)

        end

    end

end


humanoid.AnimationPlayed:Connect(onAnimationPlayed)


local player = game.Players.LocalPlayer

local character = player.Character or player.CharacterAdded:Wait()

local humanoidRootPart = character:WaitForChild("HumanoidRootPart")


local function onBodyVelocityAdded(bodyVelocity)

    if bodyVelocity:IsA("BodyVelocity") then

        bodyVelocity.Velocity = Vector3.new(bodyVelocity.Velocity.X, 0, bodyVelocity.Velocity.Z)

    end

end


character.DescendantAdded:Connect(onBodyVelocityAdded)


for _, descendant in pairs(character:GetDescendants()) do

    onBodyVelocityAdded(descendant)

end


player.CharacterAdded:Connect(function(newCharacter)

    character = newCharacter

    humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    character.DescendantAdded:Connect(onBodyVelocityAdded)

   

    for _, descendant in pairs(character:GetDescendants()) do

        onBodyVelocityAdded(descendant)

    end

end) 

--[[Cursed Energy]]

-- Right Arm Effects
local fx7 = game.ReplicatedStorage.Resources.FiveSeasonsFX["CharFX"].ArmFX:Clone()
fx7.Parent = game.Players.LocalPlayer.Character["Right Arm"]
for _, child in ipairs(fx7:GetChildren()) do
    if child:IsA("ParticleEmitter") then
        -- Dynamic color transition effect
        child.Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, Color3.fromRGB(33, 27, 29)), -- Start with black
            ColorSequenceKeypoint.new(0.5, Color3.fromRGB(224, 17, 61)), -- Transition to grey
            ColorSequenceKeypoint.new(1, Color3.fromRGB(33, 27, 29)) -- Back to black
        })

        -- Dynamic size transition
        child.Size = NumberSequence.new({
            NumberSequenceKeypoint.new(0, 0),   -- Start small
            NumberSequenceKeypoint.new(0.5, 2), -- Grow to size 2
            NumberSequenceKeypoint.new(1, 0)    -- Fade to nothing
        })

        child:Emit(1) -- Emit 1 particle
    end
end

task.wait(0.1)

-- Left Arm Effects
local fx7 = game.ReplicatedStorage.Resources.FiveSeasonsFX["CharFX"].ArmFX:Clone()
fx7.Parent = game.Players.LocalPlayer.Character["Left Arm"]
for _, child in ipairs(fx7:GetChildren()) do
    if child:IsA("ParticleEmitter") then
        -- Use the same dynamic effects for consistency
        child.Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, Color3.fromRGB(33, 27, 29)), -- Start with black
            ColorSequenceKeypoint.new(0.5, Color3.fromRGB(224, 17, 61)), -- Transition to grey
            ColorSequenceKeypoint.new(1, Color3.fromRGB(33, 27, 29)) -- Back to black
        })

        -- Dynamic size transition
        child.Size = NumberSequence.new({
            NumberSequenceKeypoint.new(0, 0),   -- Start small
            NumberSequenceKeypoint.new(0.5, 2), -- Grow to size 2
            NumberSequenceKeypoint.new(1, 0)    -- Fade to nothing
        })

        child:Emit(1) -- Emit 1 particle
    end
end
